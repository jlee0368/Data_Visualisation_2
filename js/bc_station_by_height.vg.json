{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "data": {
    "url": "https://jlee0368.github.io/Data_Visualisation_2/data/MyRTKnet_station_loc_cleaned.csv"
  },
  "transform": [
    {"calculate": "toNumber(datum['Height in meter'])", "as": "height_m"}
  ],
  "layer": [
    {
      "mark": {"type": "bar", "color": "#009dff"},
      "encoding": {
        "x": {
          "field": "height_m", 
          "bin": {"maxbins": 30}, 
          "type": "quantitative", 
          "title": "Station Height Range (m)",
          "axis" : {"titleFontSize": 12}
        },
        "y": {
          "aggregate": "count", 
          "type": "quantitative", 
          "title": "Number of Stations",
          "axis": {"grid": false, "titleFontSize": 12} 
        },
        "tooltip": [ 
          {"aggregate": "count", "title": "Number of MyRTKnet Stations"}
        ]
      }
    },
    {
      "data": { "values": [
        {"x_data_point": 100, "y_data_point": 40, "x_text": 600, "y_text": 28.5, "text": "Most Stations Are Below 100m", "align": "center", "baseline": "bottom"},
        {"x_data_point": 1100, "y_data_point": 1, "x_text": 800, "y_text": 15, "text": "Few High-Elevation Stations (Outliers)", "align": "center", "baseline": "top"}
      ]},
      "mark": {
        "type": "text",
        "fontWeight": "bold",
        "fontSize": 18,
        "color": "black",
        "opacity": 0.9,
        "align": "center"
      },
      "encoding": {
        "x": {"field": "x_text", "type": "quantitative"},
        "y": {"field": "y_text", "type": "quantitative"},
        "text": {"field": "text"}
      }
    },
    {
      "data": { "values": [
        {"x_data_start": 100, "y_data_start": 38, "x_line_end": 600, "y_line_end": 30},
        {"x_data_start": 1100, "y_data_start": 1, "x_line_end": 800, "y_line_end": 13.8}
      ]},
      "mark": {
        "type": "rule",
        "strokeDash": [7, 7],
        "opacity": 0.8,
        "stroke": "black"
      },
      "encoding": {
        "x": {"field": "x_data_start", "type": "quantitative"},
        "y": {"field": "y_data_start", "type": "quantitative"},
        "x2": {"field": "x_line_end", "type": "quantitative"},
        "y2": {"field": "y_line_end", "type": "quantitative"}
      }
    }
  ],
  "title": {"text": "Histogram of MyRTKnet Station Heights", "fontSize": 24},
  "width": 500,
  "height": 550,
  "config": {"view": {"stroke": null}}
}